"use strict";(self.webpackChunkhtml_bundler_docs=self.webpackChunkhtml_bundler_docs||[]).push([[3250],{4433:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>u,frontMatter:()=>r,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"Options/PluginOptions/js","title":"js","description":"Option: js","source":"@site/docs/Options/PluginOptions/js.mdx","sourceDirName":"Options/PluginOptions","slug":"/plugin-options-js","permalink":"/html-bundler-webpack-plugin/plugin-options-js","draft":false,"unlisted":false,"editUrl":"https://github.com/webdiscus/html-bundler-docs/tree/docusaurus/docs/Options/PluginOptions/js.mdx","tags":[{"inline":true,"label":"JS","permalink":"/html-bundler-webpack-plugin/tags/js"},{"inline":true,"label":"inline","permalink":"/html-bundler-webpack-plugin/tags/inline"}],"version":"current","sidebarPosition":40,"frontMatter":{"sidebar_position":40,"slug":"/plugin-options-js","title":"js","tags":["JS","inline"]},"sidebar":"docsSidebar","previous":{"title":"data","permalink":"/html-bundler-webpack-plugin/plugin-options-data"},"next":{"title":"css","permalink":"/html-bundler-webpack-plugin/plugin-options-css"}}');var t=i(4848),l=i(8453);const r={sidebar_position:40,slug:"/plugin-options-js",title:"js",tags:["JS","inline"]},c="Options for JS",o={},a=[{value:"Advanced Inline Configuration",id:"advanced-inline-configuration",level:2},{value:"Examples",id:"examples",level:2},{value:"Attribute Filtering",id:"attribute-filtering",level:3},{value:"Filename template",id:"filename-template",level:3},{value:"Inline runtime chunks",id:"inline-runtime-chunks",level:3},{value:"Chunk Splitting",id:"chunk-splitting",level:3},{value:"Related Resources",id:"related-resources",level:2}];function d(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"options-for-js",children:"Options for JS"})}),"\n",(0,t.jsxs)(n.p,{children:["Option: ",(0,t.jsx)(n.code,{children:"js"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"type JsOptions = {\n  filename?: FilenameTemplate;\n  chunkFilename?: FilenameTemplate;\n  outputPath?: string;\n  inline?: 'auto' | boolean | JsInlineOptions;\n};\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Default"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"{\n  filename: '[name].js',\n  chunkFilename: '[id].js',\n  outputPath: null,\n  inline: false,\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsxs)(n.strong,{children:[(0,t.jsx)(n.code,{children:"JsOptions"})," Object properties"]}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"filename"}),": Specifies the output filename template for JavaScript files.",(0,t.jsx)(n.br,{}),"\n","For details, see the ",(0,t.jsx)(n.a,{href:"/plugin-options-filename",children:(0,t.jsx)(n.code,{children:"filename"})})," option."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"chunkFilename"}),": Defines the filename template for non-initial chunks."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"outputPath"}),": Sets the output directory for JavaScript files. Refer to the ",(0,t.jsx)(n.a,{href:"/plugin-options-outputPath",children:(0,t.jsx)(n.code,{children:"outputPath"})})," option."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"inline"}),": Controls JavaScript inlining behavior in HTML.",(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.strong,{children:"Valid values"}),":","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"false"}),": Outputs JavaScript to external files (default)."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"true"}),": Inlines JavaScript via ",(0,t.jsx)(n.code,{children:"<script>"})," tags."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"'auto'"}),": Inlines in ",(0,t.jsx)(n.code,{children:"development"})," mode; outputs files in ",(0,t.jsx)(n.code,{children:"production"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"JsInlineOptions"}),": Advanced Inline Configuration"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"advanced-inline-configuration",children:"Advanced Inline Configuration"}),"\n",(0,t.jsx)(n.p,{children:"Type:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"type JsInlineOptions = {\n  enabled?: 'auto' | boolean;\n  chunk?: RegExp | Array<RegExp>;\n  source?: RegExp | Array<RegExp>;\n  attributeFilter?: (props: {\n    attribute: string;\n    value: string;\n    attributes: { [attributeName: string]: string; };\n  }) => boolean | void;\n};\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsxs)(n.strong,{children:[(0,t.jsx)(n.code,{children:"JsInlineOptions"})," Object Properties"]}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"enabled"}),": Overrides the base inlining behavior. Default: ",(0,t.jsx)(n.code,{children:"true"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"chunk"}),": Inlines chunks matching specified regular expression(s)."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"source"}),": Inlines all chunks from source files matching regular expression(s)."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"attributeFilter"}),": Filters attributes for inlined ",(0,t.jsx)(n.code,{children:"<script>"})," tags.",(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.strong,{children:"Returns"}),":","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"true"})," to retain an attribute."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"false"})," or ",(0,t.jsx)(n.code,{children:"undefined"})," to remove it."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,t.jsx)(n.h3,{id:"attribute-filtering",children:"Attribute Filtering"}),"\n",(0,t.jsx)(n.p,{children:"To preserve specific attributes during inlining:"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Source HTML"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-html",children:'<script id="js-main" src="./main.js" defer><\/script>\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Configuration"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"new HtmlBundlerPlugin({\n  js: {\n    inline: {\n      attributeFilter: ({ attribute }) => attribute === 'id',\n    },\n  },\n});\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Output HTML"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-html",children:'<script id="js-main">\n  // Inlined JavaScript\n<\/script>\n'})}),"\n",(0,t.jsx)(n.h3,{id:"filename-template",children:"Filename template"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:'new HtmlBundlerPlugin({\n  js: {\n    filename: "js/[name].[contenthash:8].js",\n  },\n});\n'})}),"\n",(0,t.jsx)(n.h3,{id:"inline-runtime-chunks",children:"Inline runtime chunks"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Configuration part"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:'new HtmlBundlerPlugin({\n  js: {\n    filename: "js/[name].[contenthash:8].js",\n    inline: {\n      chunk: [/runtime.+[.]js/],\n    },\n  },\n});\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Output Behavior"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-text",children:"- `js/app.xxxxxxxx.js`  -> Saved as file.\n- `runtime.xxxxxxxx.js` -> Inlined into HTML.\n"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.admonition,{type:"warning",children:[(0,t.jsxs)(n.p,{children:["Inlining Webpack\u2019s runtime chunks disables the ",(0,t.jsx)(n.code,{children:'publicPath: "auto"'})," option.\nWebpack\u2019s runtime determines the public path using ",(0,t.jsx)(n.code,{children:"currentScript.src"}),", but inlining removes the ",(0,t.jsx)(n.code,{children:"src"})," attribute.\nThis causes automatic resolution to fail, and the browser may show:\n",(0,t.jsx)(n.code,{children:'"Automatic publicPath is not supported in this browser"'}),"."]}),(0,t.jsx)(n.p,{children:"Possible solutions:"}),(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Use an absolute or relative path in ",(0,t.jsx)(n.code,{children:"output.publicPath"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Set ",(0,t.jsx)(n.code,{children:"__webpack_public_path__"})," manually at runtime in your entry point.\nSee ",(0,t.jsx)(n.a,{href:"https://webpack.js.org/guides/public-path/",children:"Webpack\u2019s guide on setting publicPath on the fly"})," for details."]}),"\n"]})]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"chunk-splitting",children:"Chunk Splitting"}),"\n",(0,t.jsxs)(n.p,{children:["Make sure the ",(0,t.jsx)(n.code,{children:"test"})," field matches only script modules \u2014 such as ",(0,t.jsx)(n.code,{children:".js"}),", ",(0,t.jsx)(n.code,{children:".ts"}),", ",(0,t.jsx)(n.code,{children:".mjs"}),", etc \u2014 to avoid invalid outputs."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:'splitChunks: {\n  cacheGroups: {\n    app: {\n      chunks: "all",\n      test: /\\.[cm]?[tj]s$/i, // Ensure only script files are matched for proper chunk splitting\n    },\n  },\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"Use a function to target scripts more precisely and to debug which modules are picked."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:'splitChunks: {\n  cacheGroups: {\n    app: {\n      chunks: "all",\n      test: (module) => {\n        const match = module.type?.includes("javascript");\n        // Match debugging: JavaScript modules in glorious disarray\n        if (match) {\n          console.log("[app]", module.resource);\n        }\n\n        return match && "resource" in module && /\\.[cm]?[tj]s$/i.test(module.resource);\n      },\n    },\n  },\n}\n'})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.admonition,{type:"warning",children:(0,t.jsxs)(n.p,{children:["Omitting the ",(0,t.jsx)(n.code,{children:"test"})," regex in ",(0,t.jsx)(n.code,{children:"splitChunks"})," may cause Webpack to generate invalid files. Always restrict splitting\nto JavaScript/TypeScript files."]})}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"related-resources",children:"Related Resources"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsxs)(n.a,{href:"https://webpack.js.org/configuration/output/#outputfilename",children:["Webpack ",(0,t.jsx)(n.code,{children:"output.filename"})]})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsxs)(n.a,{href:"https://webpack.js.org/configuration/output/#outputchunkfilename",children:["Webpack ",(0,t.jsx)(n.code,{children:"output.chunkFilename"})]})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsxs)(n.a,{href:"/faq/split-chunks-keep-module-name",children:["Split chunks from ",(0,t.jsx)(n.strong,{children:"node_modules"})]})}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>c});var s=i(6540);const t={},l=s.createContext(t);function r(e){const n=s.useContext(l);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);